# プルリクエストの準備・作成

- [プルリクエストの準備・作成](#プルリクエストの準備作成)
  - [一つのことだけを行う小さなPRを作成する](#一つのことだけを行う小さなprを作成する)
    - [複数の目的が一つのPRに入っていることで起きる不都合](#複数の目的が一つのprに入っていることで起きる不都合)
  - [PR提出前にセルフレビューを行う](#pr提出前にセルフレビューを行う)


## 一つのことだけを行う小さなPRを作成する

PRは一つの目的(機能追加、不具合修正、リファクタリングなど)ごとに作成する。

（そしてその一つの目的を達成するための複数の意思決定の積み上げがコミット履歴となる）

### 複数の目的が一つのPRに入っていることで起きる不都合

- サイズが大きく単純にレビューがとても大変なので、レビュアーに拒否・後回しにされやすい
    - 待ち時間が長くなりコンテキストスイッチのコストが大きくなる
    - コンフリクト解消コストが増加する
- 問題ない部分をマージ出来ない[4]
    - A,B,Cの3つの目的を含むPRがあり、レビュアーはA,Bには同意したがCの内容について議論を投げかけたとする。すると、Cの議論が長引くとA,Bについてのコード差分は問題ないのにマージできない

ただ実際には複数の目的を一つのPRで出してしまいたい状況もあるかもしれない(主目的＋小さなついでの目的など)。こういった場合は、PRのdescriptionに書くか差分に自分でコメントする形で、説明を付けるとレビューがしやすくなる。コミット履歴が綺麗であれば（コミット単位でレビューしやすければ）PRが多少大きくてもまだ大丈夫かもしれない

## PR提出前にセルフレビューを行う

- PR提出前にセルフレビューを行うようにすると、意外と自分でも直した方が良い箇所が見つかる
- typoやTODOコメントが残ってしまっているなど本質的でないものは特に自分で見つけておけると良い
    - レビュアーがなるべく本質的な課題(ビジネスロジックなど)のレビューに集中出来るようにすると、レビュー工数は削減されるし問題も見逃されづらくなるし、良いレビュープロセスになる
    - (ちなみにPR提出前なのであれば、typoを直すだけのようなコミットは残さずにその修正箇所のコミットに統合しておくと無駄なコミットが出来ず綺麗でレビューもしやすいコミット履歴になる)
