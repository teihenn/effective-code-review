# プルリクエストの準備・作成

- [プルリクエストの準備・作成](#プルリクエストの準備作成)
  - [変更は小さく\[1\]](#変更は小さく1)
  - [PRを出す前にrebaseを使ってコミットを整理する](#prを出す前にrebaseを使ってコミットを整理する)
  - [PRの説明欄には、コミットのリンクも載せておくとわかりやすい](#prの説明欄にはコミットのリンクも載せておくとわかりやすい)
  - [一気に複数のPRを出さず、出せるものから出していく](#一気に複数のprを出さず出せるものから出していく)


## 変更は小さく[1]

- *コードレビューのプロセスを機敏なものに保つ上で最も重要なプラクティスはおそらく、変更を小さくとどめておくことだ。理想的にはコードレビューは、レビュアーと作者双方のために、噛み砕いて理解することが容易で、かつただ1つの問題に集中したものであるべきだ。(〜中略〜)「小さな」変更とは通常、約200行までのコードに限定されるべきだ。*[1]
- 変更が小さければ、エンジニアが大きめの変更のレビューを待って時間を浪費することも防げ、業務の中断時間が減るし、変更内にあるバグの原因を特定するのも容易となる
- タスクを独立した問題に分割することで小さいPRを作る
- もちろん分割することで、大きな図式の中でその変更が持つ意味を理解するのが難しくなったり、コード作者の作業が複雑になってしまうような場合もあるので、出来る範囲で小さくしたい

## PRを出す前にrebaseを使ってコミットを整理する

- intaractive rebaseを使ってコミットをまとめたり、コミットメッセージを修正したりすることが出来る
- 関連する修正は一つのコミットにまとめてあると読みやすい
- PRを出す前に一気にだと大変なので、実際は開発しながらやるのが良い
- もし直したほうがわかりやすくなりそうな場所があればPRを出す前に直しておくと良い
- 例えば機能Aの追加、その修正、そのまた修正、という3つのコミットがあるのであればこれは1つにまとめた方が良い
  - このようなコミットが残ったままだとツリーが見づらく、逆にこういったコミットが整理されているとツリーは綺麗でとても見やすい。また、機能自体のrevertなどもしやすい

参考：[Appendix_コミットまわりのテクニック](./Appendix_コミットまわりのテクニック.md)

## PRの説明欄には、コミットのリンクも載せておくとわかりやすい

- 例えばPRの説明欄になにか変更内容に関することを書いたら、その内容に紐付くコミットのリンクも貼ると親切
- もちろんそのためには、コミットの単位が綺麗でないと出来ないし、コミットメッセージもわかりやすく書いておくべきである

## 一気に複数のPRを出さず、出せるものから出していく

- 複数リポジトリにまたがる開発をしているときなど、やりがちだが、出来たものから出していく
- 一気に複数個出ると見るのが大変な場合がある
