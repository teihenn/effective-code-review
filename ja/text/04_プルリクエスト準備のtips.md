# プルリクエストの準備・作成

- [プルリクエストの準備・作成](#プルリクエストの準備作成)
  - [一つのことだけを行う小さなPRを作成する\[4\]](#一つのことだけを行う小さなprを作成する4)
  - [PR提出前にセルフレビューを行う](#pr提出前にセルフレビューを行う)
  - [一気に複数のPRを出さず、出せるものから出していく](#一気に複数のprを出さず出せるものから出していく)


## 一つのことだけを行う小さなPRを作成する[4]

- PRは一つの目的(機能追加、不具合修正、リファクタリングなど)ごとに作成する
    - そしてその一つの目的を達成するための複数の意思決定の積み上げがコミット履歴となるべき
- A,B,Cの3つの目的を含むPRがあり、レビュアーはA,Bには同意したがCの内容について議論を投げかけたとする。すると、Cの議論が長引くとA,Bについてのコード差分は問題ないのにマージできないということになってしまう
- 1つのPRに異なる関心事が複数入っていると、単純にレビューするのもとても大変
    - 変更が小さければ、レビュイーが大きめの変更のレビューを待って時間を浪費することも防げ、業務の中断時間が減るし、変更内にあるバグの原因を特定するのも容易となる
    - *コードレビューのプロセスを機敏なものに保つ上で最も重要なプラクティスはおそらく、変更を小さくとどめておくことだ。理想的にはコードレビューは、レビュアーと作者双方のために、噛み砕いて理解することが容易で、かつただ1つの問題に集中したものであるべきだ。*[1]
- 小さなPRはレビュアーに拒否・後回しにされづらい
- ただ実際には複数の目的を一つのPRで出してしまいたい状況もあるかもしれない(主目的＋小さなついでの目的など)。こういった場合は、PRのdescriptionに書くか差分に自分でコメントする形で、説明を付ける

## PR提出前にセルフレビューを行う

- PR提出前にセルフレビューを行うようにすると、意外と自分でも直した方が良い箇所が見つかる
- typoやTODOコメントが残ってしまっているなど本質的でないものは自分で見つけておけると良い
    - レビュアーがなるべく本質的な課題(ビジネスロジックや機能/非機能要件を満たしているか)のレビューに集中出来るようにすると、レビュー工数は削減されるし問題も見逃されづらくなるし、良いレビュープロセスになる
    - (ちなみにこの時typoを直すだけのようなコミットは残さずにその修正箇所のコミットに統合しておくと無駄なコミットが出来ず綺麗でレビューもしやすいコミット履歴になる)

## 一気に複数のPRを出さず、出せるものから出していく

- 複数リポジトリにまたがる開発をしているときなど、やりがちだが、出来たものから出していく
- 一気に複数個出ると見るのが大変な場合がある
