# コードレビューの恩恵[1]

- コードの正しさのチェック
- 他のエンジニアにとって変更が理解出来るものであることの確認
- コードベース全体での一貫性を保つ
- 心理的な恩恵
- ドメイン知識や技術の共有
- コードについての議論の履歴の記録

## コードの正しさ

- IBMの調査：プロセスの比較的早期に欠陥を発見すると、当然ながら後々修正に必要となる時間が短くなる[1][12]
    - コードレビューによりそれがなかった場合にデバッグや手動テストに費やされていた時間を節約できる
    - ただしコードレビュープロセス自体が軽量であってこそである

- コードレビューだけが正しいコードを保証するための策ではなく、多層防御の一要素に過ぎず、コードレビューが成果を上げるためには「完璧」である必要はない。より「完璧」な解法についての合意を待つよりは、コードベースを改善する変更を承認していく
    - そのため、レビュアーは個人の意見を理由として代案を出すのではなく、意味の把握を強める（例: 複雑さを減らす）場合か、機能性を向上させる（例: 効率をより上げる）場合に留めると良い

## コードの意味の共通認識を持てるようにする

- コード作者以外にしか出来ないこと：コード作者の観点から生じるバイアスに影響されないフィードバックを提供すること
    - コードの意味の把握に関する質問は時間が経過するにつれ対応コストが膨れ上がるので、作者はコードレビューで受けている質問をどんなものであれ一つ一つを妥当なものと考えるべき
    - 必ずしも批評に応じてアプローチやロジックを変えるべきいうことではなく、自分のコードをもっと明確に説明する必要があるかもしれないということ

- *コードレビューは、ある変更がより広い対象にとって理解可能かどうか試す最初の試練であることが多い。コードは書かれるより読まれる回数が多くなるため、この観点は生死を分けるほどに重要であり、理解と意味の把握が決定的に重要である。*[1]

## コードベース全体での一貫性を保つ

- 書き方がチームで一貫性があると理解しやすい・読みやすい(コードベースに詳しくない他チームのエンジニアなどにも)
- 言語のベストプラクティスに従い、コードが過度に複雑にならずに済んでいるか
- 一貫性があり単純なコードは、理解が比較的容易であり、リファクタリングも比較的容易
- 一貫性は機能性と衝突するかもしれないが、既存コードと一貫性のある複雑性の低い変更が良い場合もある

## 心理的な恩恵

- 各エンジニアが個人的なスタイルとソフトウェア設計に対する自己流のアプローチになるのを防ぐ
    - コードは自分個人のものではなく実際には集合的な事業の一部
- コードレビューのプロセスそのものが、批判を和らげる
    - コードレビューは性質上、批判的な意見を要求するものであるが、上手く機能しているコードレビューではあらかじめ規定された中立的なやり方で意義を呈するので、批判が和らぐ
- コード作者が自身の変更について配慮を行うようになる
    - コードレビューがなければ、手を抜いてしまうかもしれない
        - 例：「unit testは全部はやってない、でも後でできるから...」コードレビューでは他者のチェックを受けることになるので、このような問題を作者にきちんと意識させる
    - コードレビューがあることで、PR提出前に、作者自身が自身の変更に目を通し準備が万端に整っていることを確認するための良い機会となる
        - 品質向上に繋がる

## ドメイン知識や技術の共有, 議論の履歴の記録

- コードレビューは知識移転にぴったりの機会
- コードレビュープロセスは、エンジニアが互いにやり取りし、コーディングのテクニックについての情報交換を行う主要な方法
- コードレビューは履歴の記録の役目を果たす
    - 例えば特定の設計がどのように導入されたのかなど、どのエンジニアも後から変更について詳しく調べることができる

# コードレビュー自体の効率化の恩恵

- 生産性の向上
    - 効率化されたレビュープロセスではレビュアーのフィードバックが早く行われるので開発が早く進む
    - レビュー待ち時間が少ないのでコンテキストスイッチの影響が減少し個々の開発者の生産性が向上
    - (逆にレビューが大変なPRがたくさん出たりしていると、チーム全体の生産性が低下する)
- 品質の向上
    - レビュアーがより集中して本質的な問題に注力可能。それにより問題を見逃しづらくなる
    - 問題の早期発見・修正により、技術的負債を抑制する
        - レビューに時間がかかりすぎたりしていると、機能リリースのスケジュールに間に合わせるため保守性などが後回しにされる可能性がある
- チームへの良い影響
    - レビュー関連のフラストレーション減少
    - レビュイー・レビュアーで協力して良いものを作り上げる達成感
    - ベストプラクティスや設計パターンの共有が上手く行われ互いを高め合うことが出来る

上記のような恩恵が、迅速な機能リリースや高品質なコードによる顧客満足度の上昇に繋がり、ビジネス価値が向上する。
